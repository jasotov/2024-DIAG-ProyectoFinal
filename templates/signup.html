{% extends 'base.html' %}

{% block content %}
<div class="container col-md-6 px-2 py-2">
    <form method="POST" action="{{ url_for('signup')}}" id="signup" class="needs-validation" novalidate>
        <div class="card" style="vertical-align: middle;">
            <div class="card-header" style="text-align: center;">
                Registro Nuevo Usuario
            </div>
            <div class="card-body">
                <div class="px-4" >
                    <div class="form-group has-validation">
                        <label class="form-label">Email</label>
                        <input type="email" id="email" name="email" class="form-control" required />
                        <div class="invalid-feedback" style="font-size: smaller;">
                            Email es obligatorio y debe tener el formato correcto!
                        </div>
                    </div>
                    <div class="form-group has-validation">
                        <label class="form-label" for="nombre">Nombre</label>
                        <input type="text" id="nombre" name="nombre" class="form-control" value="{{name}}" maxlength="100" required />
                        <div class="invalid-feedback" style="font-size: smaller;">
                            Nombre es obligatorio!
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="fav_movies">Películas Favoritas</label>
                        <input type="text" id="fav_movies" name="fav_movies" class="form-control" value="{{fav_movies}}" maxlength="100" />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="fav_series">Series Favoritas</label>
                        <input type="text" id="fav_series" name="fav_series" class="form-control" value="{{fav_series}}" maxlength="100" />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="kind_movies">Géneros Favoritos</label>
                        <input type="text" id="kind_movies" name="kind_movies" class="form-control" value="{{kind_movies}}" maxlength="100" />
                    </div>
                    <hr class="hr-text">
                    <div class="form-group has-validation">
                        <label class="form-label" for="password1">Contraseña</label>
                        <input type="password" id="password1" name="password1" class="form-control" autocomplete="off" required />
                        <div class="invalid-feedback" style="font-size: smaller;">
                            Contraseña es obligatoria y debe cumplir las reglas!
                        </div>
                        <div class="row" style="font-size: x-small;">
                            <div class="col-sm-6">
                                <span id="8char"></span> Largo 8 caracteres<br>
                                <span id="ucase"></span> Una letra mayúscula
                            </div>
                            <div class="col-sm-6">
                                <span id="lcase"></span> Una letra minúscula<br>
                                <span id="num"></span> Un número
                            </div>
                        </div>
                    </div>
                    <div class="form-group has-validation">
                        <br/>
                        <label class="form-label" for="password2">Confirme Contraseña</label>
                        <input type="password" id="password2" name="password2" class="form-control" required />
                        <div class="invalid-feedback" style="font-size: smaller;">
                            Confirmación de contraseña es obligatoria y debe coincidir con Contraseña!
                        </div>
                        <input type="text" id="passwordsok" name="passwordsok" value="" class="form-control" style="display: none;" required />
                        <div class="row" style="font-size: x-small;">
                            <div class="col-sm-12">
                                <span id="pwmatch"></span> Contraseñas coinciden
                            </div>
                        </div>
                    </div>
                    <div class="d-grid gap-2">
                        <br/>
                        <button class="btn btn-primary px-4 me-md-2" onclick="submitSignup(this);">
                            <div class="d-flex justify-content-center">
                                <span id="text">Registrar</span>
                                <span class="spinner-border spinner-border-sm" id="spinner" style="display: none;"></span>
                            </div>
                        </button>   
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div style="text-align: center;">
        <br/>
        <p><a class="link-opacity-50" href="/">Ir a Inicio</a></p>
    </div>
</div>
<script language="javascript" src="{{ url_for('static', filename='js/formvalidation.js') }}"></script>
<script language="javascript" src="{{ url_for('static', filename='js/pwdvalidation.js') }}"></script>
{% with messages = get_flashed_messages()%}
{% if messages%}
    {% for message in messages%}
    <script>
        sweetAlert2('Error','{{message}}','error');
    </script>
    {%endfor%}
{%endif%}
{%endwith%}
{% endblock %}